<app-header></app-header>

<app-loading-center *ngIf="loading"></app-loading-center>

<div class="container" *ngIf="!loading">

    <div class="card">
        <div class="card-header">
            <h4>Crear producto</h4>
        </div>
        <div class="card-body">
    <!-- ReactiveFormsModule -->
    <form [formGroup]="form" (ngSubmit)="save()"> 

        <!-- <app-alert *ngIf="success"></app-alert> -->

        <!-- {{ form.value | json }} -->

        <div class="row mb-3">
            <div class="col-lg-8 col-12">
                <app-input-group>
                    <input formControlName="name" type="text" class="form-control" placeholder="Name"
                        aria-label="tiktok" aria-describedby="basic-tiktok">
                </app-input-group>
            </div>

            <div class="col-lg-4 col-12">
                <app-input-group>
                    <input formControlName="tags" type="text" class="form-control" placeholder="tags"
                        aria-label="tags" aria-describedby="basic-tags">
                </app-input-group>
            </div>

            <div class="col-lg-12 col-12">
                <textarea id="" formControlName="body" class="form-control mb-3"
                    placeholder="Descripcion"></textarea>
            </div>


            <!-- {{ categories | json }} -->



            <div class="col-lg-12 col-12">

                <!-- {{ categories | json}} -->

                <div class="custom-select mb-3">
                    <div class="selected" (click)="toggleDropdown()">
                        {{ selectedCategory ? selectedCategory.name : 'Selecciona una categoría' }}
                        <i class="fas fa-chevron-down" [class.rotate]="isDropdownOpen"></i>
                    </div>
                    <div class="options" *ngIf="isDropdownOpen">
                        <ng-container *ngFor="let category of categories">
                            <!-- Opción para la categoría principal en negrita -->
                            <div class="option" (click)="selectCategory(category)">
                                <strong>{{ category.name }}</strong>
                            </div>
                            <!-- Opciones para las subcategorías -->
                            <ng-container *ngFor="let child of category.children">
                                <div class="option" (click)="selectCategory(child)">-- {{ child.name }}</div>
                                <!-- Opciones para subcategorías de subcategorías -->
                                <ng-container *ngFor="let grandChild of child.children">
                                    <div class="option" (click)="selectCategory(grandChild)">---- {{ grandChild.name }}</div>
                                </ng-container>
                            </ng-container>
                        </ng-container>
                    </div>
                </div>

                <!-- <div class="breadcrumb">

                    <ng-container *ngFor="let name of breadcrumb; let last = last">
                        <span>{{ name }}</span>
                        <span *ngIf="!last">{{ ' > ' }}</span>
                    </ng-container>
                </div> -->

            </div>

            <div class="col-lg-12 col-12">
                <app-loading-center *ngIf="loadingSize"></app-loading-center>
                <select (change)="selectSize($event)" name="" class="form-control" id="" *ngIf="showSize && !loadingSize">
                    <option [value]="0">Seleccine talla</option>
                    <option *ngFor="let size of sizes" [value]="size.name">{{ size.name }}</option>
                </select>
            </div>

        </div>

        <app-button-save [btnLoading]="loadingEdit" [btnActive]="form.valid"></app-button-save>

    </form>
        </div>
    </div>




</div>